/*! doc 2014-07-09 */
function reset(){var a={},b=[];prev=null,headings=$("h1").map(function(c,d){var e=d.textContent,f=e.split(".");if(f[0]in a)b[a[f[0]]].push({name:f.slice(1).join("."),id:d.id});else{var g=[];a[f[0]]=b.length,g.push({name:f[0],id:d.id}),f[1]&&g.push({name:f.slice(1).join("."),id:d.id}),b.push(g)}return{top:$(d).offset().top,id:d.id}}),$menu[0].innerHTML=generateMenu(b)}function generateMenu(a){for(var b="",c=0,d=a.length;d>c;c++){for(var e=0,f=a[c],g=f.length;g>e;e++)b+=0===e?"<li><a href='#"+f[e].id+"'>"+f[e].name+"</a><ul>":"<li><a href='#"+f[e].id+"'>"+f[e].name+"</a></li>";b+="</ul></li>"}return b}angular.module("app",[]).factory("toMarkdown",function(){return function(a){var b="";for(var c in a)b+="#"+c+"\n",a[c].param&&(a[c].param.value&&(b+="###"+a[c].param.value+"\n"),a[c].param.type&&(b+="###"+a[c].param.type+"\n")),a[c].description&&a[c].description.value&&(b+="    "+a[c].description.value+"\n"),b+="***\n";return b}}).controller("todo",["$scope","$http","toMarkdown",function(a,b,c){var d=new Showdown.converter;a.get=function(){b({url:"/get",method:"get"}).then(function(a){var b=a.data.str;document.getElementById("view").innerHTML=d.makeHtml(c(parser(b))),reset()})}}]),angular.bootstrap(document,["app"]);var prev,headings=[],$menu=$("#menu");!function(a){function b(){for(var b,c=a(window).scrollTop(),d=headings.length;d--;)if(b=headings[d],c>=b.top-1)return b}a(document).scroll(function(){var c=b();if(c){prev&&(prev.removeClass("active"),prev.parent().parent().removeClass("active"));var d=a('a[href="#'+c.id+'"]');d.addClass("active"),d.parent().parent().addClass("active"),prev=d}})}(jQuery);